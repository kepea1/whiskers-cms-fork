import{r,$ as z,a as C}from"./index.hULzTigk.js";import{r as k}from"./index.k5lWt58j.js";import{_ as F,b as A,$ as D}from"./utils.DoN5dk7S.js";function K(e,t=[]){let s=[];function n(c,f){const i=r.createContext(f),u=s.length;s=[...s,f];function a(l){const{scope:p,children:v,...m}=l,h=p?.[e][u]||i,b=r.useMemo(()=>m,Object.values(m));return r.createElement(h.Provider,{value:b},v)}function d(l,p){const v=p?.[e][u]||i,m=r.useContext(v);if(m)return m;if(f!==void 0)return f;throw new Error(`\`${l}\` must be used within \`${c}\``)}return a.displayName=c+"Provider",[a,d]}const o=()=>{const c=s.map(f=>r.createContext(f));return function(i){const u=i?.[e]||c;return r.useMemo(()=>({[`__scope${e}`]:{...i,[e]:u}}),[i,u])}};return o.scopeName=e,[n,j(o,...t)]}function j(...e){const t=e[0];if(e.length===1)return t;const s=()=>{const n=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(c){const f=n.reduce((i,{useScope:u,scopeName:a})=>{const l=u(c)[`__scope${a}`];return{...i,...l}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:f}),[f])}};return s.scopeName=t.scopeName,s}function R(e,t,{checkForDefaultPrevented:s=!0}={}){return function(o){if(e?.(o),s===!1||!o.defaultPrevented)return t?.(o)}}const q=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],X=q.reduce((e,t)=>{const s=r.forwardRef((n,o)=>{const{asChild:c,...f}=n,i=c?A:t;return r.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),r.createElement(i,F({},f,{ref:o}))});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function Y(e,t){e&&k.flushSync(()=>e.dispatchEvent(t))}function x(e){const t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>(...s)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...s)},[])}function le({prop:e,defaultProp:t,onChange:s=()=>{}}){const[n,o]=G({defaultProp:t,onChange:s}),c=e!==void 0,f=c?e:n,i=x(s),u=r.useCallback(a=>{if(c){const l=typeof a=="function"?a(e):a;l!==e&&i(l)}else o(a)},[c,e,o,i]);return[f,u]}function G({defaultProp:e,onChange:t}){const s=r.useState(e),[n]=s,o=r.useRef(n),c=x(t);return r.useEffect(()=>{o.current!==n&&(c(n),o.current=n)},[n,o,c]),s}const J=r.createContext(void 0);function de(e){const t=r.useContext(J);return e||t||"ltr"}const w=globalThis?.document?r.useLayoutEffect:()=>{};function Q(e,t){return r.useReducer((s,n)=>{const o=t[s][n];return o??s},e)}const V=e=>{const{present:t,children:s}=e,n=Z(t),o=typeof s=="function"?s({present:n.isPresent}):r.Children.only(s),c=D(n.ref,o.ref);return typeof s=="function"||n.isPresent?r.cloneElement(o,{ref:c}):null};V.displayName="Presence";function Z(e){const[t,s]=r.useState(),n=r.useRef({}),o=r.useRef(e),c=r.useRef("none"),f=e?"mounted":"unmounted",[i,u]=Q(f,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{const a=T(n.current);c.current=i==="mounted"?a:"none"},[i]),w(()=>{const a=n.current,d=o.current;if(d!==e){const p=c.current,v=T(a);e?u("MOUNT"):v==="none"||a?.display==="none"?u("UNMOUNT"):u(d&&p!==v?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),w(()=>{if(t){const a=l=>{const v=T(n.current).includes(l.animationName);l.target===t&&v&&k.flushSync(()=>u("ANIMATION_END"))},d=l=>{l.target===t&&(c.current=T(n.current))};return t.addEventListener("animationstart",d),t.addEventListener("animationcancel",a),t.addEventListener("animationend",a),()=>{t.removeEventListener("animationstart",d),t.removeEventListener("animationcancel",a),t.removeEventListener("animationend",a)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:r.useCallback(a=>{a&&(n.current=getComputedStyle(a)),s(a)},[])}}function T(e){return e?.animationName||"none"}const H=z.useId||(()=>{});let ee=0;function fe(e){const[t,s]=r.useState(H());return w(()=>{e||s(n=>n??String(ee++))},[e]),e||(t?`radix-${t}`:"")}function ve(e){const t=e+"CollectionProvider",[s,n]=K(t),[o,c]=s(t,{collectionRef:{current:null},itemMap:new Map}),f=v=>{const{scope:m,children:h}=v,b=C.useRef(null),E=C.useRef(new Map).current;return C.createElement(o,{scope:m,itemMap:E,collectionRef:b},h)},i=e+"CollectionSlot",u=C.forwardRef((v,m)=>{const{scope:h,children:b}=v,E=c(i,h),P=D(m,E.collectionRef);return C.createElement(A,{ref:P},b)}),a=e+"CollectionItemSlot",d="data-radix-collection-item",l=C.forwardRef((v,m)=>{const{scope:h,children:b,...E}=v,P=C.useRef(null),y=D(m,P),O=c(a,h);return C.useEffect(()=>(O.itemMap.set(P,{ref:P,...E}),()=>void O.itemMap.delete(P))),C.createElement(A,{[d]:"",ref:y},b)});function p(v){const m=c(e+"CollectionConsumer",v);return C.useCallback(()=>{const b=m.collectionRef.current;if(!b)return[];const E=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(m.itemMap.values()).sort((O,g)=>E.indexOf(O.ref.current)-E.indexOf(g.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:f,Slot:u,ItemSlot:l},p,n]}function te(e,t=globalThis?.document){const s=x(e);r.useEffect(()=>{const n=o=>{o.key==="Escape"&&s(o)};return t.addEventListener("keydown",n),()=>t.removeEventListener("keydown",n)},[s,t])}const I="dismissableLayer.update",ne="dismissableLayer.pointerDownOutside",oe="dismissableLayer.focusOutside";let _;const se=r.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),me=r.forwardRef((e,t)=>{var s;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:f,onInteractOutside:i,onDismiss:u,...a}=e,d=r.useContext(se),[l,p]=r.useState(null),v=(s=l?.ownerDocument)!==null&&s!==void 0?s:globalThis?.document,[,m]=r.useState({}),h=D(t,$=>p($)),b=Array.from(d.layers),[E]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),P=b.indexOf(E),y=l?b.indexOf(l):-1,O=d.layersWithOutsidePointerEventsDisabled.size>0,g=y>=P,W=re($=>{const N=$.target,M=[...d.branches].some(S=>S.contains(N));!g||M||(c?.($),i?.($),$.defaultPrevented||u?.())},v),L=ce($=>{const N=$.target;[...d.branches].some(S=>S.contains(N))||(f?.($),i?.($),$.defaultPrevented||u?.())},v);return te($=>{y===d.layers.size-1&&(o?.($),!$.defaultPrevented&&u&&($.preventDefault(),u()))},v),r.useEffect(()=>{if(l)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(_=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(l)),d.layers.add(l),U(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=_)}},[l,v,n,d]),r.useEffect(()=>()=>{l&&(d.layers.delete(l),d.layersWithOutsidePointerEventsDisabled.delete(l),U())},[l,d]),r.useEffect(()=>{const $=()=>m({});return document.addEventListener(I,$),()=>document.removeEventListener(I,$)},[]),r.createElement(X.div,F({},a,{ref:h,style:{pointerEvents:O?g?"auto":"none":void 0,...e.style},onFocusCapture:R(e.onFocusCapture,L.onFocusCapture),onBlurCapture:R(e.onBlurCapture,L.onBlurCapture),onPointerDownCapture:R(e.onPointerDownCapture,W.onPointerDownCapture)}))});function re(e,t=globalThis?.document){const s=x(e),n=r.useRef(!1),o=r.useRef(()=>{});return r.useEffect(()=>{const c=i=>{if(i.target&&!n.current){let a=function(){B(ne,s,u,{discrete:!0})};const u={originalEvent:i};i.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=a,t.addEventListener("click",o.current,{once:!0})):a()}else t.removeEventListener("click",o.current);n.current=!1},f=window.setTimeout(()=>{t.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(f),t.removeEventListener("pointerdown",c),t.removeEventListener("click",o.current)}},[t,s]),{onPointerDownCapture:()=>n.current=!0}}function ce(e,t=globalThis?.document){const s=x(e),n=r.useRef(!1);return r.useEffect(()=>{const o=c=>{c.target&&!n.current&&B(oe,s,{originalEvent:c},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function U(){const e=new CustomEvent(I);document.dispatchEvent(e)}function B(e,t,s,{discrete:n}){const o=s.originalEvent.target,c=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&o.addEventListener(e,t,{once:!0}),n?Y(o,c):o.dispatchEvent(c)}export{X as $,ve as a,K as b,de as c,le as d,fe as e,x as f,R as g,V as h,w as i,me as j,Y as k};
